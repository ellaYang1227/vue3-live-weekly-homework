import{b9 as g,b8 as u,m as h,u as w,n as t,F as _,au as f,aK as o,k as x,l as b,aw as m,ak as d,t as T,a4 as k}from"./plugin-vueexport-helper-6502c603.js";import{L as P}from"./LoadingStore-344bc819.js";import{P as D}from"./PaginationComponent-a006d26b.js";import"./runtime-dom.esm-bundler-8d942a76.js";const{VITE_API_URL:y,VITE_API_PATH:L}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"ella-diving",BASE_URL:"/vue3-live-weekly-homework/week6/dist/",MODE:"production",DEV:!1,PROD:!0},V={data(){return{orders:{}}},computed:{orderTotal(){return this.orders.data?Object.keys(this.orders.data).length:0}},mounted(){this.getOrders()},components:{PaginationComponent:D},methods:{...u(P,["showLoading","hideLoading"]),getOrders(e=1){this.showLoading(),this.$http.get(`${y}/api/${L}/admin/orders?page=${e}`).then(i=>{const{orders:r,pagination:l}=i.data;this.orders={data:r,pagination:l},this.hideLoading()}).catch(i=>{this.hideLoading(),this.$refs.sweetalert.showSwal("popup","error",i.response.data.message)})},handleCreate_at(e){e=new Date(e*1e3);const i=e.getFullYear();let r=e.getMonth()+1;r=this.transformTwoDigits(r);let l=e.getDate();l=this.transformTwoDigits(l);let a=e.getHours();a=this.transformTwoDigits(a);let n=e.getMinutes();n=this.transformTwoDigits(n);let c=e.getSeconds();return c=this.transformTwoDigits(c),`${i}/${r}/${l} ${a}:${n}:${c}`},transformTwoDigits(e){return 10>e&&(e=`0${e}`),e}}},$={class:"container"},A=t("div",{class:"d-flex justify-content-between align-items-center mb-3"},[t("h1",{class:"mb-0 h4 fw-bold"},"訂單管理")],-1),C={class:"table table-striped table-hover text-center align-middle"},S=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"訂單編號"),t("th",{scope:"col"},"購買人"),t("th",{scope:"col"},"聯絡電話"),t("th",{scope:"col"},"訂單金額"),t("th",{scope:"col"},"是否付款"),t("th",{scope:"col",width:"170px"},"留言")])],-1),v={class:"text-start"},E={class:"h6 mb-0 text-truncate fw-bold"},I={class:"d-block text-muted"},O={class:"text-start"},B={class:"d-block text-muted"},N={class:"text-end"},R={class:"text-break text-start"},F={scope:"col",colspan:"7",class:"text-start"};function H(e,i,r,l,a,n){const c=m("SweetalertComponent"),p=m("PaginationComponent");return d(),h(_,null,[w(c,{ref:"sweetalert"},null,512),t("div",$,[A,t("table",C,[S,t("tbody",null,[(d(!0),h(_,null,f(a.orders.data,s=>(d(),h("tr",{key:s.id},[t("th",v,[t("h4",E,o(s.id),1),t("small",I,o(n.handleCreate_at(s.create_at)),1)]),t("td",O,[T(o(s.user.name),1),t("small",B,o(s.user.email),1)]),t("td",null,o(s.user.tel),1),t("td",N,"$"+o(s.total),1),t("td",null,[t("strong",{class:k([s.is_paid?"text-success":"text-danger"])},o(s.is_paid?"已付款":"未付款"),3)]),t("td",R,o(s.message),1)]))),128))]),t("tfoot",null,[t("tr",null,[t("th",F,"訂單數量："+o(n.orderTotal)+" 筆",1)])])]),a.orders.pagination?(d(),x(p,{key:0,pagination:a.orders.pagination,onSwitchPage:n.getOrders},null,8,["pagination","onSwitchPage"])):b("",!0)])],64)}const K=g(V,[["render",H]]);export{K as default};
