import{bs as p}from"./plugin-vueexport-helper-6502c603.js";import{a as o}from"./axios-bff3f665.js";import{L as $}from"./LoadingStore-344bc819.js";import{d as a}from"./Sweetalert2-options-02b29ef3.js";const{VITE_API_URL:r,VITE_API_PATH:s}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"ella-diving",BASE_URL:"/vue3-live-weekly-homework/week7/dist/",MODE:"production",DEV:!1,PROD:!0},{showLoading:c,hideLoading:e}=$(),C=p("CartStore",{state:()=>({cart:{}}),actions:{addCart(t,i=1){if(t){c();const h={product_id:t,qty:i};o.post(`${r}/api/${s}/cart`,{data:h}).then(()=>{e(),a("toast","success","已加入購物車")}).catch(()=>{e(),a("toast","error","加入購物車失敗")})}},getCart(){c(),o.get(`${r}/api/${s}/cart`).then(t=>{e(),this.cart=t.data.data}).catch(t=>{e(),a("popup","error",t.response.data.message)})},delCart(t){c(),t?o.delete(`${r}/api/${s}/cart/${t}`).then(()=>{this.getCart(),a("toast","success","已刪除購物車品項")}).catch(()=>{e(),a("toast","error","刪除購物車品項失敗")}):o.delete(`${r}/api/${s}/carts`).then(()=>{this.getCart(),a("toast","success","購物車已全部清空")}).catch(()=>{e(),a("toast","error","清空購物車失敗")})},changeCartItem(t){c();const{id:i,qty:h,product:d}=t,n={product_id:d.id,qty:h};o.put(`${r}/api/${s}/cart/${i}`,{data:n}).then(()=>{this.getCart()}).catch(()=>{e(),a("toast","error","購物車更新失敗")})}}});export{C};
