import{b as y}from"./vue-router-0d72b5b6.js";import{b9 as v,b8 as h,m as r,u as p,n as e,F as _,au as g,aw as u,ak as i,aK as c,t as m,l as k,b2 as P}from"./plugin-vueexport-helper-6502c603.js";import{L as x}from"./LoadingStore-344bc819.js";import{C as L}from"./CartStore-5e1ed282.js";import{g as C}from"./functions-5280628d.js";import"./axios-bff3f665.js";import"./Sweetalert2-options-02b29ef3.js";const{VITE_API_URL:$,VITE_API_PATH:A}={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2",VITE_API_PATH:"ella-diving",BASE_URL:"/vue3-live-weekly-homework/week7/dist/",MODE:"production",DEV:!1,PROD:!0},E={data(){return{products:[],getHowPriceLess:C}},components:{RouterLink:y},mounted(){this.getProducts()},computed:{handleProducts(){return this.products.reduce((a,n)=>{const d=a.find(s=>s.category===n.category);if(d)d.products.push(n);else{const s={category:n.category,products:[]};s.products.push(n),a.push(s)}return a},[])}},methods:{...h(x,["showLoading","hideLoading"]),...h(L,["addCart"]),getProducts(){this.$http.get(`${$}/api/${A}/products/all`).then(o=>{this.hideLoading(),this.products=o.data.products}).catch(o=>{this.hideLoading(),this.$refs.sweetalert.showSwal("popup","error",o.response.data.message)})}}},I={class:"container"},V={class:"h5 fw-bold bg-light px-2 py-3"},T={class:"row row-cols-1 row-cols-md-3 row-cols-xl-4 g-4"},H={class:"card bg-light h-100"},R={class:"bg-white text-center img-box p-3"},S=["src","alt"],B={class:"card-body"},D={class:"card-title fw-bold"},N={class:"text-danger fw-bold"},U={key:0,class:"d-block text-black-50"},F={class:"card-footer pb-4 d-flex bg-transparent border-0"},O=["onClick"];function j(o,a,n,d,s,w){const b=u("sweetalert-component"),f=u("router-link");return i(),r(_,null,[p(b,{ref:"sweetalert"},null,512),e("div",I,[(i(!0),r(_,null,g(w.handleProducts,l=>(i(),r("div",{class:"pb-5",key:l.category},[e("h1",V,c(l.category),1),e("div",T,[(i(!0),r(_,null,g(l.products,t=>(i(),r("div",{class:"col",key:t.id},[e("div",H,[e("div",R,[e("img",{src:t.imageUrl,alt:`${t.category} - ${t.title}`,class:"img-object-fit-cover card-img-top"},null,8,S)]),e("div",B,[e("h5",D,c(t.title),1),e("div",N,[m(" $"+c(t.price),1),s.getHowPriceLess(t.origin_price,t.price)?(i(),r("small",U,"現省 $"+c(s.getHowPriceLess(t.origin_price,t.price)),1)):k("",!0)])]),e("div",F,[p(f,{to:`/product/${t.id}`,role:"button",class:"btn btn-outline-primary btn-sm flex-grow-1 flex-shrink-0 me-2"},{default:P(()=>[m("產品詳情")]),_:2},1032,["to"]),e("button",{type:"button",class:"btn btn-outline-danger btn-sm flex-grow-1 flex-shrink-0",onClick:K=>o.addCart(t.id)}," 加入購物車 ",8,O)])])]))),128))])]))),128))])],64)}const X=v(E,[["render",j]]);export{X as default};
